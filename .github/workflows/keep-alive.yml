name: Keep Render Service Alive

# Запускается каждые 10 минут для поддержания активности сервиса на Render
on:
  schedule:
    # Cron формат: минута час день месяц день_недели
    # Каждые 10 минут: */10 * * * *
    - cron: '*/10 * * * *'
  workflow_dispatch: # Позволяет запускать вручную

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Render Service
        run: |
          # Отправляем запрос к эндпоинту /health для поддержания активности сервиса
          curl -f https://icona-design.onrender.com/health || echo "Service might be sleeping, that's ok"
          
          # Второй запрос для надежности (с небольшой задержкой)
          sleep 2
          curl -f https://icona-design.onrender.com/health || echo "Second ping failed"

